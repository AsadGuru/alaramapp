<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Multiple Timers App</title>
  <style>
    /* CSS Styling */
    body {
      font-family: sans-serif;
      background-color: #222;
      color: white;
      text-align: center;
    }

    .container {
      width: 550px;
      margin: 0 auto;
      padding: 20px;
      background-color: #333;
      border-radius: 10px;
    }

    h1 {
      margin-bottom: 20px;
    }

    input[type="number"] {
      width: 50px;
      padding: 5px;
      margin: 0 5px;
      text-align: center;
    }

    button {
      background-color: #ffc107;
      color: white;
      padding: 10px 28px;
      border: none;
      border-radius: 20px;
      cursor: pointer;
    }

    #setTimer {
      background-color: #444;  /* Background color for the setTimer section */
      padding: 20px;
      border-radius: 10px;
      margin-bottom: 20px;
    }

    #currentTimers {
      margin-top: 20px;
    }

    .timer {
      padding: 20px 40px;
      margin: 10px 0;
      background-color: #444;
      color: #fff;
      border-radius: 5px;
      display: flex;
      justify-content: space-evenly;
      align-items: center;
      font-size: 2em; /* Bigger font size for timer text */
      height: 30px;   /* Fixed height to center text vertically */
      position: relative; /* Positioning context for the button */
    }

    .timer-ended {
      background-color: rgb(193, 193, 36); /* Yellow background for ended timers */
    }

    .stop-btn,
    .delete-btn {
      background-color: #ffc107;
      color: rgb(0, 0, 0);
      text-align: center;
      padding: 10px 20px;
      border: none;
      border-radius: 20px;
      cursor: pointer;
      position: absolute;
      right: 20px;  /* Position the button to the right */
    }

    .stop-btn:hover,
    .delete-btn:hover {
      background-color: #000;
      color: #fff;
    }

    .no-timers-message {
      color: #ccc;
      font-size: 16px;
    }

    .timer-finished-message {
      font-size: 36px;
      text-align: center;
      color: rgb(0, 0, 0);
    }

    .time-left-text {
      font-size: 26px;
      color: #fff;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Multiple Timers App</h1>

    <div id="setTimer">
      <label for="hours">Set Time:</label>
      <input type="number" id="hours" min="0" max="23" value="00"> :
      <input type="number" id="minutes" min="0" max="59" value="00"> :
      <input type="number" id="seconds" min="0" max="59" value="00">
      <button id="startTimer">Set</button>
    </div>

    <div id="currentTimers">
      <h2>Current Timers</h2>
      <!-- <p>You have no timers currently!</p> -->
      <div id="active-timers-list"></div>
    </div>
  </div>

  <audio id="alert-sound" src="" preload="auto"></audio>

  <script>
    let timers = [];
    let timerId = 0;

    document.getElementById("startTimer").addEventListener("click", startNewTimer);

    function startNewTimer() {
      const hours = parseInt(document.getElementById("hours").value) || 0;
      const minutes = parseInt(document.getElementById("minutes").value) || 0;
      const seconds = parseInt(document.getElementById("seconds").value) || 0;

      // Validate input
      if (hours < 0 || minutes < 0 || seconds < 0) {
        alert("Please enter valid positive numbers!");
        return;
      }

      const totalTimeInSeconds = (hours * 3600) + (minutes * 60) + seconds;

      if (totalTimeInSeconds <= 0) {
        alert("Please enter a time greater than zero.");
        return;
      }

      // Add new timer to array
      const newTimer = {
        id: timerId++,
        remainingTime: totalTimeInSeconds,
        intervalId: null,
        finished: false  // Track whether the timer has finished
      };

      timers.push(newTimer);
      displayTimers();
      startTimer(newTimer);
    }

    function startTimer(timer) {
      timer.intervalId = setInterval(() => {
        if (timer.remainingTime > 0) {
          timer.remainingTime--; // Decrease the remaining time
        } else if (timer.remainingTime === 0 && !timer.finished) {
          clearInterval(timer.intervalId);  // Stop the interval when time is up
          timer.finished = true; // Mark the timer as finished
          handleTimerEnd(timer);
        }
        updateTimerDisplay(timer);
      }, 1000);
    }

    function stopTimer(timerId) {
      const timer = timers.find(t => t.id === timerId);
      if (timer && timer.intervalId) {
        clearInterval(timer.intervalId);
        timer.intervalId = null;
      }

      // Stop the alert sound when a timer is deleted
      const alertSound = document.getElementById("alert-sound");
      alertSound.pause();
      alertSound.currentTime = 0;  // Reset the alert sound
      timers = timers.filter(t => t.id !== timerId);
      displayTimers();
    }

    function displayTimers() {
      const timerList = document.getElementById("active-timers-list");
      timerList.innerHTML = ""; // Clear the timer list

      if (timers.length === 0) {
        // Show a message when there are no timers
        const noTimersMessage = document.createElement("div");
        noTimersMessage.classList.add("no-timers-message");
        noTimersMessage.textContent = "You have no timers currently!";
        timerList.appendChild(noTimersMessage);
      } else {
        // Display the timers if there are any
        timers.forEach((timer) => {
          const timerElement = document.createElement("div");
          timerElement.classList.add("timer");

          // If the timer is finished, show the message and delete button
          if (timer.finished) {
            timerElement.classList.add("timer-ended");
            timerElement.innerHTML = `
              <span class="timer-finished-message">Timer Is Up!</span>
            `;
            // Show the delete button after timer ends
            const deleteButton = document.createElement("button");
            deleteButton.classList.add("delete-btn");
            deleteButton.textContent = "Delete";
            deleteButton.onclick = () => stopTimer(timer.id);
            timerElement.appendChild(deleteButton);
          } else {
            const timeLeft = formatTime(timer.remainingTime);
            timerElement.innerHTML = `
              <span class="time-left-text">Time Left: ${timeLeft}</span>
            `;
            // Show the stop button while the timer is running
            const stopButton = document.createElement("button");
            stopButton.classList.add("stop-btn");
            stopButton.textContent = "Stop";
            stopButton.onclick = () => stopTimer(timer.id);
            timerElement.appendChild(stopButton);
          }

          timerList.appendChild(timerElement);
        });
      }
    }

    function updateTimerDisplay(timer) {
      displayTimers();
    }

    function handleTimerEnd(timer) {
      const alertSound = document.getElementById("alert-sound");
      alertSound.play();
      displayTimers();
    }

    function formatTime(seconds) {
      const hours = Math.floor(seconds / 3600);
      const minutes = Math.floor((seconds % 3600) / 60);
      const secondsLeft = seconds % 60;

      return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${secondsLeft.toString().padStart(2, '0')}`;
    }
  </script>
</body>
</html>
